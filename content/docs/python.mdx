---
title: "Python"
description: "Python integration and polyglot capabilities in Elide"
date: "2025-11-19"
---

import { Alert } from '@/components/ui/alert'

# Python in Elide

Elide provides seamless Python integration powered by GraalPython, enabling polyglot applications that combine JavaScript and Python.

## Python Runtime

Elide includes a full CPython-compatible Python runtime:

```python
# hello.py
def greet(name: str) -> str:
    return f"Hello, {name}!"

# Use Python's rich standard library
import json
import datetime

def process_data(items):
    """Process a list of items"""
    results = []
    for item in items:
        results.append({
            'id': item['id'],
            'processed_at': datetime.datetime.now().isoformat(),
            'value': item['value'] * 2
        })
    return results

if __name__ == '__main__':
    data = [{'id': 1, 'value': 100}]
    print(process_data(data))
```

Run Python directly:

```bash
elide run hello.py
```

## JavaScript â†” Python Interop

The most powerful feature is seamless interoperability:

### Call Python from JavaScript

```javascript
// app.js - Import Python module
const { greet, process_data } = await import('./hello.py')

// Call Python functions with JavaScript data
const message = await greet('World')
console.log(message) // "Hello, World!"

// Pass JavaScript arrays to Python
const items = [
  { id: 1, value: 100 },
  { id: 2, value: 200 }
]

const results = await process_data(items)
console.log(results)
```

### Call JavaScript from Python

```python
# python_app.py
import polyglot

# Access JavaScript objects
console = polyglot.import_value('console')
console.log('Hello from Python!')

# Call JavaScript functions
fetch = polyglot.import_value('fetch')
response = fetch('https://api.example.com/data')
data = response.json()
```

## Data Sharing

Objects pass by reference between languages with zero serialization:

```javascript
// JavaScript
const users = [
  { name: "Alice", age: 30 },
  { name: "Bob", age: 25 }
]

// Call Python with JavaScript array
const { analyze } = await import('./analyzer.py')
const result = await analyze(users)
```

```python
# analyzer.py
def analyze(users):
    """Analyze JavaScript array in Python"""
    # users is accessible as Python list
    total_age = sum(u['age'] for u in users)
    avg_age = total_age / len(users)
    
    return {
        'count': len(users),
        'average_age': avg_age,
        'names': [u['name'] for u in users]
    }
```

No serialization overhead!

## Scientific Computing

Use Python's data science ecosystem:

```python
# ml_model.py
import numpy as np
import pandas as pd
from sklearn.linear_model import LinearRegression

def train_model(data):
    """Train ML model on data"""
    df = pd.DataFrame(data)
    
    X = df[['feature1', 'feature2']].values
    y = df['target'].values
    
    model = LinearRegression()
    model.fit(X, y)
    
    return {
        'coefficients': model.coef_.tolist(),
        'intercept': float(model.intercept_),
        'score': float(model.score(X, y))
    }

def predict(model_params, features):
    """Make predictions"""
    # Reconstruct model from params
    model = LinearRegression()
    model.coef_ = np.array(model_params['coefficients'])
    model.intercept_ = model_params['intercept']
    
    X = np.array(features).reshape(1, -1)
    prediction = model.predict(X)
    
    return float(prediction[0])
```

Use from JavaScript:

```javascript
// server.js
const { train_model, predict } = await import('./ml_model.py')

const app = Elide.http

app.router.handle("POST", "/train", async (request, response) => {
  const data = request.body.data
  
  // Train Python ML model
  const model = await train_model(data)
  
  response.json(model)
})

app.router.handle("POST", "/predict", async (request, response) => {
  const { model, features } = request.body
  
  // Use Python model for prediction
  const prediction = await predict(model, features)
  
  response.json({ prediction })
})
```

## Package Management

### Install Python Packages

```bash
# Install packages with pip
elide pip install numpy pandas scikit-learn

# Or use requirements.txt
elide pip install -r requirements.txt
```

### Using venv

```bash
# Create virtual environment
python -m venv .venv

# Activate
source .venv/bin/activate  # Linux/macOS
.venv\Scripts\activate  # Windows

# Install packages
pip install numpy pandas

# Run with Elide
elide run app.py
```

## Best Practices

### Type Hints

```python
from typing import List, Dict, Optional

def process_users(users: List[Dict[str, any]]) -> Dict[str, int]:
    """Process user data with type hints"""
    return {
        'count': len(users),
        'total_age': sum(u.get('age', 0) for u in users)
    }

def find_user(users: List[Dict], user_id: int) -> Optional[Dict]:
    """Find user by ID"""
    for user in users:
        if user.get('id') == user_id:
            return user
    return None
```

### Error Handling

```python
class ValidationError(Exception):
    """Custom validation error"""
    pass

def validate_user(user: dict):
    if 'email' not in user:
        raise ValidationError('Email is required')
    if '@' not in user['email']:
        raise ValidationError('Invalid email format')
```

Handle in JavaScript:

```javascript
try {
  await validate_user(userData)
} catch (error) {
  if (error.name === 'ValidationError') {
    console.error('Validation failed:', error.message)
  }
}
```

## Example: Full-Stack Polyglot App

```javascript
// server.js - JavaScript HTTP server
const { analyze_sentiment, train_model } = await import('./ml.py')

const app = Elide.http

// API endpoint using Python ML
app.router.handle("POST", "/sentiment", async (req, res) => {
  const { text } = req.body
  const sentiment = await analyze_sentiment(text)
  res.json({ text, sentiment })
})

// Train endpoint
app.router.handle("POST", "/train", async (req, res) => {
  const { data } = req.body
  const model = await train_model(data)
  res.json({ model })
})

console.log("ðŸš€ Polyglot server running!")
```

```python
# ml.py - Python ML logic
from textblob import TextBlob
import numpy as np

def analyze_sentiment(text: str) -> dict:
    """Analyze sentiment using TextBlob"""
    blob = TextBlob(text)
    polarity = blob.sentiment.polarity
    
    if polarity > 0.1:
        sentiment = 'positive'
    elif polarity < -0.1:
        sentiment = 'negative'
    else:
        sentiment = 'neutral'
    
    return {
        'sentiment': sentiment,
        'polarity': polarity,
        'subjectivity': blob.sentiment.subjectivity
    }

def train_model(data: list) -> dict:
    """Train a simple model"""
    X = np.array([d['features'] for d in data])
    y = np.array([d['label'] for d in data])
    
    # Training logic here...
    
    return {
        'accuracy': 0.95,
        'params': {}
    }
```
## Performance Considerations

### Zero-Copy Data Sharing
- Arrays and objects pass by reference
- No serialization between languages
- Shared memory space

### Native Performance
- Python compiled with GraalVM
- JIT optimization across language boundaries
- Native image includes Python code

## Next Steps

- **[JavaScript Guide](/docs/javascript)** - JavaScript features
- **[Runtime](/docs/runtime)** - How polyglot works
- **[Server API](/docs/api-server)** - Build servers

<Alert>
  <strong>Key Benefit:</strong> Elide lets you use Python for ML/data science while building your API in JavaScriptâ€”all in one fast, efficient runtime!
</Alert>

