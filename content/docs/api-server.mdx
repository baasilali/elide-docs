---
title: "Server API"
description: "HTTP server APIs and web application development"
date: "2025-11-19"
---

import { Alert } from '@/components/ui/alert'

# Server API Reference

The Elide HTTP server is a high-performance, Netty-based web server with HTTP/1.1, HTTP/2, and HTTP/3 support.

## Quick Start

Create a basic server:

```javascript
const app = Elide.http

app.router.handle("GET", "/", (request, response) => {
  response.send(200, "Hello, Elide!")
})

console.log("Server running on http://localhost:8080")
```

## Request Handling

### Request Object

```javascript
app.router.handle("GET", "/users/:id", (request, response) => {
  // URL parameters
  const userId = request.params.id
  
  // Query parameters
  const page = request.query.page || 1
  
  // Headers
  const auth = request.headers['authorization']
  
  // Request info
  console.log(request.method)  // GET
  console.log(request.url)     // /users/123?page=1
  console.log(request.path)    // /users/123
  
  response.json({ userId, page })
})
```

### Request Body

```javascript
// JSON body
app.router.handle("POST", "/users", (request, response) => {
  const userData = request.body
  
  console.log(userData.name, userData.email)
  
  response.json({ created: true, user: userData })
})

// Form data
app.router.handle("POST", "/upload", (request, response) => {
  const { file, description } = request.body
  
  // file is a Buffer or Blob
  response.send(200, "Uploaded")
})
```

## Response Methods

### Basic Responses

```javascript
// Text response
response.send(200, "Hello, World!")

// JSON response
response.json({
  message: "Success",
  data: { id: 123 }
})

// Status code
response.status(404).send("Not Found")

// Custom headers
response.setHeader("Content-Type", "text/html")
response.setHeader("X-Custom", "value")
response.send(200, "<h1>HTML</h1>")

// Multiple headers
response.headers({
  "Content-Type": "application/json",
  "Cache-Control": "no-cache",
  "X-Request-ID": requestId
})
```

### File Responses

```javascript
// Send file
app.router.handle("GET", "/download", (request, response) => {
  response.sendFile("./files/document.pdf")
})

// Stream file
app.router.handle("GET", "/video", async (request, response) => {
  const stream = await Elide.fs.createReadStream("./video.mp4")
  response.stream(stream, {
    "Content-Type": "video/mp4"
  })
})
```

### Redirects

```javascript
// Temporary redirect (302)
response.redirect("/new-location")

// Permanent redirect (301)
response.redirect(301, "/new-location")
```

## Routing

### Route Patterns

```javascript
// Static routes
app.router.handle("GET", "/", handler)
app.router.handle("GET", "/about", handler)

// URL parameters
app.router.handle("GET", "/users/:id", handler)
app.router.handle("GET", "/posts/:postId/comments/:commentId", handler)

// Wildcard
app.router.handle("GET", "/files/*", handler)

// Optional parameters
app.router.handle("GET", "/docs/:section?/:page?", handler)
```

### HTTP Methods

```javascript
// GET
app.router.handle("GET", "/users", getUsers)

// POST
app.router.handle("POST", "/users", createUser)

// PUT
app.router.handle("PUT", "/users/:id", updateUser)

// DELETE
app.router.handle("DELETE", "/users/:id", deleteUser)

// PATCH
app.router.handle("PATCH", "/users/:id", patchUser)

// Multiple methods
app.router.handle("GET|POST", "/data", handler)
```

### Router Groups

```javascript
// API routes
const apiRoutes = (router) => {
  router.handle("GET", "/users", getUsers)
  router.handle("POST", "/users", createUser)
  router.handle("GET", "/posts", getPosts)
}

app.router.group("/api/v1", apiRoutes)

// Results in:
// GET /api/v1/users
// POST /api/v1/users
// GET /api/v1/posts
```

## Middleware

### Creating Middleware

```javascript
// Logger middleware
function logger(request, response, next) {
  const start = Date.now()
  
  // Call next handler
  next()
  
  const duration = Date.now() - start
  console.log(`${request.method} ${request.path} - ${duration}ms`)
}

// Apply middleware
app.router.use(logger)
```

### Built-in Middleware

```javascript
// CORS
app.router.use((req, res, next) => {
  res.setHeader("Access-Control-Allow-Origin", "*")
  res.setHeader("Access-Control-Allow-Methods", "GET, POST, PUT, DELETE")
  res.setHeader("Access-Control-Allow-Headers", "Content-Type")
  next()
})

// Body parser (built-in)
// JSON and form data parsed automatically

// Rate limiting
const limiter = createRateLimiter({
  windowMs: 60000, // 1 minute
  max: 100         // 100 requests per window
})

app.router.use(limiter)
```

### Error Handling

```javascript
// Error middleware
app.router.use((error, request, response, next) => {
  console.error('Error:', error)
  
  response.status(500).json({
    error: error.message,
    stack: process.env.NODE_ENV === 'development' ? error.stack : undefined
  })
})

// Async error handling
app.router.handle("GET", "/data", async (request, response) => {
  try {
    const data = await fetchData()
    response.json(data)
  } catch (error) {
    response.status(500).json({ error: error.message })
  }
})
```

## WebSockets

```javascript
// WebSocket endpoint
app.router.ws("/chat", {
  onOpen(socket) {
    console.log("Client connected")
    socket.send("Welcome!")
  },
  
  onMessage(socket, message) {
    console.log("Received:", message)
    
    // Echo back
    socket.send(`Echo: ${message}`)
    
    // Broadcast to all
    socket.broadcast(message)
  },
  
  onClose(socket) {
    console.log("Client disconnected")
  },
  
  onError(socket, error) {
    console.error("WebSocket error:", error)
  }
})
```

## Server-Sent Events (SSE)

```javascript
app.router.handle("GET", "/events", (request, response) => {
  // Set SSE headers
  response.setHeader("Content-Type", "text/event-stream")
  response.setHeader("Cache-Control", "no-cache")
  response.setHeader("Connection", "keep-alive")
  
  // Send events
  const intervalId = setInterval(() => {
    response.write(`data: ${JSON.stringify({ time: new Date() })}\n\n`)
  }, 1000)
  
  // Clean up on disconnect
  request.on('close', () => {
    clearInterval(intervalId)
  })
})
```

## Configuration

### Server Options

```javascript
// Configure server
Elide.http.configure({
  port: 8080,
  host: '0.0.0.0',
  
  // HTTP/2 support
  http2: true,
  
  // TLS/SSL
  tls: {
    cert: './cert.pem',
    key: './key.pem'
  },
  
  // Timeouts
  requestTimeout: 30000,    // 30 seconds
  keepAliveTimeout: 60000,  // 60 seconds
  
  // Limits
  maxHeaderSize: 16384,     // 16KB
  maxBodySize: 10485760,    // 10MB
  
  // Compression
  compression: true,
  
  // Static files
  static: {
    root: './public',
    index: 'index.html',
    cache: 3600 // 1 hour
  }
})
```

## Static Files

```javascript
// Serve static files
app.router.static("/assets", "./public/assets")

// With options
app.router.static("/files", "./uploads", {
  index: false,           // Don't serve index.html
  dotfiles: 'ignore',     // Ignore dotfiles
  maxAge: 86400,          // Cache for 1 day
  immutable: true         // Aggressive caching
})
```

## Performance

The Elide HTTP server delivers exceptional performance:

| Metric | Value |
|--------|-------|
| **Throughput** | 800K+ req/s |
| **Latency (p50)** | < 1ms |
| **Latency (p99)** | < 5ms |
| **Concurrent Connections** | 100K+ |

Tips for maximum performance:

- Use native compilation for production
- Enable HTTP/2 or HTTP/3
- Use streaming for large responses
- Enable compression
- Set appropriate caching headers

## Next Steps

- **[Configuration](/docs/configuration)** - Configure your server
- **[Deployment](/docs/deployment)** - Deploy to production
- **[Security](/docs/security)** - Secure your application

<Alert>
  <strong>Pro Tip:</strong> The Elide HTTP server is built on Netty, the same technology powering many high-scale applications. It's battle-tested and production-ready!
</Alert>
